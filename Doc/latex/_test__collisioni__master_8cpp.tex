\section{Riferimenti per il file /\+Users/noe/\+Documents/\+Robot/\+Librerie/\+R\+F\+M69/\+Esempi/\+Test\+\_\+collisioni\+\_\+master.cpp}
\label{_test__collisioni__master_8cpp}\index{/\+Users/noe/\+Documents/\+Robot/\+Librerie/\+R\+F\+M69/\+Esempi/\+Test\+\_\+collisioni\+\_\+master.\+cpp@{/\+Users/noe/\+Documents/\+Robot/\+Librerie/\+R\+F\+M69/\+Esempi/\+Test\+\_\+collisioni\+\_\+master.\+cpp}}


Test collisioni tra messaggi.  


{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include \char`\"{}R\+F\+M69.\+h\char`\"{}}\newline
\subsection*{Definizioni}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a66dbe921e452d7831e1f1f7ff8d720ff}} 
\#define {\bfseries L\+E\+D\+\_\+\+TX}~5
\item 
\mbox{\label{_test__collisioni__master_8cpp_a365035e660d1eae73ced4109ba9f8288}} 
\#define {\bfseries L\+E\+D\+\_\+\+A\+CK}~4
\end{DoxyCompactItemize}
\subsection*{Tipi enumerati (enum)}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a6443c45b3c39356944733bd5845b0823}} 
enum {\bfseries elem\+Riass} \{ \newline
{\bfseries mpm\+Previsti}, 
{\bfseries mpm\+Effettivi}, 
{\bfseries mess\+Tot}, 
{\bfseries durata}, 
\newline
{\bfseries successo}
 \}
\end{DoxyCompactItemize}
\subsection*{Funzioni}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a30929ad9aa20be449cfdcfdf096b011f}} 
void {\bfseries invia} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a5ba7c94d7b647769c1eab4535fdf0ca4}} 
void {\bfseries leggi} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a3569164e5c9c054a56d5f70566d8a57d}} 
void {\bfseries accendi\+Led} (uint8\+\_\+t)
\item 
\mbox{\label{_test__collisioni__master_8cpp_a06e193cb7e01cd99fcfee23c739abac9}} 
void {\bfseries spegni\+Led} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a4060ad64ab502790e4f8676af0643697}} 
void {\bfseries stampa\+Novita} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a9c04820d041a5acce0d46251c425b31e}} 
void {\bfseries elabora\+Statistiche} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a21422ed259545ab44fccd1a3ea259c63}} 
void {\bfseries salva\+Statistiche} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a16424c6485c2e5deefa4adb21859e980}} 
void {\bfseries imposta} (uint32\+\_\+t)
\item 
\mbox{\label{_test__collisioni__master_8cpp_a7cde6740d78618b170b990bac9d1ca2a}} 
bool {\bfseries numero\+Casuale} (uint32\+\_\+t)
\item 
\mbox{\label{_test__collisioni__master_8cpp_ae642b0758db50b62835cbdb190dc3625}} 
void {\bfseries stampa\+Riassunto} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a08249380db0a20a56f8a715dedd2dc76}} 
void {\bfseries stampa\+Larghezza\+Fissa} (uint32\+\_\+t, uint8\+\_\+t, char=\textquotesingle{} \textquotesingle{})
\item 
\mbox{\label{_test__collisioni__master_8cpp_ae1b6bae9fef1e0d04a56b321386b699c}} 
void {\bfseries fine\+Programma} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_a4fc01d736fe50cf5b977f755b675f11d}} 
void {\bfseries setup} ()
\item 
\mbox{\label{_test__collisioni__master_8cpp_afe461d27b9c48d5921c00d521181f12f}} 
void {\bfseries loop} ()
\end{DoxyCompactItemize}
\subsection*{Variabili}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a2df6ba949dd4ce1e7ee9a96a19aef0fd}} 
\textbf{ R\+F\+M69} {\bfseries radio} (2, 3)
\item 
\mbox{\label{_test__collisioni__master_8cpp_a8cfea90381d7fadea030081a4e76880f}} 
const uint8\+\_\+t {\bfseries lunghezza\+Messaggi} = 4
\item 
\mbox{\label{_test__collisioni__master_8cpp_afd18a66052dc75024e8cae2c4e6d2f2c}} 
const uint8\+\_\+t {\bfseries timeout\+Ack} = 25
\item 
\mbox{\label{_test__collisioni__master_8cpp_a5a2bddb650a1874c43892279cec58148}} 
const uint16\+\_\+t {\bfseries tolleranza} = 200
\item 
\mbox{\label{_test__collisioni__master_8cpp_a91424d5a398d53cb74dcf44991723d9f}} 
const uint32\+\_\+t {\bfseries durata\+Minima\+Test} = 40000
\item 
\mbox{\label{_test__collisioni__master_8cpp_aa756f604141526ce92dd3630d5f2c398}} 
const uint16\+\_\+t {\bfseries frequenza\+Tx\+Iniziale} = 25
\item 
\mbox{\label{_test__collisioni__master_8cpp_ae4278c642aa97a2ef3b793c505553689}} 
const uint16\+\_\+t {\bfseries incremento\+Frequenza\+Tx} = 25
\item 
\mbox{\label{_test__collisioni__master_8cpp_ae81eb299eb6cd9607138ea4157b70fc1}} 
const uint8\+\_\+t {\bfseries nr\+Test\+Max} = 100
\item 
\mbox{\label{_test__collisioni__master_8cpp_a05c81c9373c9a980ebfd57611013d17a}} 
uint32\+\_\+t {\bfseries t\+Accensione\+Rx}
\item 
\mbox{\label{_test__collisioni__master_8cpp_ad95c317a1d748e767db7893c59224c6e}} 
uint32\+\_\+t {\bfseries t\+Accensione\+Tx}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a81a0d1f62dcc7fad7b79a8054dd75a7b}} 
uint32\+\_\+t {\bfseries t\+Inizio}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a94269026a3225b603f8571c95818422e}} 
uint32\+\_\+t {\bfseries micros\+Invia\+Prec}
\item 
\mbox{\label{_test__collisioni__master_8cpp_acde8756bb0569399c05b597b356657a4}} 
uint16\+\_\+t {\bfseries mess\+Inviati} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_aad51ea4d8d724173f6124013a5c48296}} 
uint16\+\_\+t {\bfseries mess\+Non\+Inviati} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_a9048445b2e03d4a7e802d73ca18184b8}} 
uint16\+\_\+t {\bfseries messaggi\+Ricevuti} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_acafb00b7378a0a002783a4fa2d662330}} 
uint16\+\_\+t {\bfseries indice\+Successo} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_a2e188ffff05b7f44a943333c52d5247a}} 
uint8\+\_\+t {\bfseries nr\+Elaborazioni} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_a4d33fb494871ce9c147242218a398ac3}} 
uint16\+\_\+t {\bfseries indici\+Successo\+Prec} [8]
\item 
\mbox{\label{_test__collisioni__master_8cpp_a13da80fe40e76e40698fedab534f9182}} 
uint32\+\_\+t {\bfseries mess\+Per\+Min}
\item 
\mbox{\label{_test__collisioni__master_8cpp_a96ef447b9fe4a1e0a35c42ff3bd13bcb}} 
uint32\+\_\+t {\bfseries mess\+Per\+Min\+Effettivi}
\item 
\mbox{\label{_test__collisioni__master_8cpp_ae4f27fd6b4d47a79b22b2356828fb251}} 
uint32\+\_\+t {\bfseries t\+Ultimo\+Messaggio} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_aa7d6cad000a6e144deb7c468f2ffe699}} 
uint32\+\_\+t {\bfseries t\+Ultima\+Stampa} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_a1340607b937a9ca840b130d324c5c963}} 
float {\bfseries deriv}
\item 
\mbox{\label{_test__collisioni__master_8cpp_aa2dd6f9af1c91277cd2c8207c86c8833}} 
uint8\+\_\+t {\bfseries nr\+Test} = 0
\item 
\mbox{\label{_test__collisioni__master_8cpp_aa71a891e13493eeacb07637c65bed5eb}} 
uint16\+\_\+t {\bfseries riassunto} [nr\+Test\+Max][5]
\item 
\mbox{\label{_test__collisioni__master_8cpp_aab29c494e4d9ca13e5a5056302e458f8}} 
bool {\bfseries novita} = false
\item 
\mbox{\label{_test__collisioni__master_8cpp_ae86a50cbc0a60fb814272f55c2ca07d7}} 
bool {\bfseries stat\+Stabili} = false
\item 
\mbox{\label{_test__collisioni__master_8cpp_aa1f2cf31ff7840359a78c7521c8a2415}} 
bool {\bfseries fine\+Test} = false
\end{DoxyCompactItemize}


\subsection{Descrizione dettagliata}
Test collisioni tra messaggi. 

Questo programma permette di stimare il numero di messaggi persi in un canale di comunicazione tra due radio molto utilizzato (centinaia di messaggi al minuto).

Le due radio svolgono lo stesso compito\+: inviano messaggi a intervalli casuali, che tendono però ad una frequenza determinata, e controllano se ci sono messaggi da leggere. Tutti i messaggi trasmessi richiedono un A\+CK. Questo programma, dato un certo numero di messaggi al minuto, stabilisce la percentuale di messaggi persi. Trovata la percentuale per una certa frequenza di trasmissione (cioè quando ogni calcolo della percentuale da un risultato simile ai precedenti) aumenta questo ultimo valore ed esegue lo stesso calcolo. Prosegue così fino a che le due radio emettono senza sosta e non possono quindi ricevere i messaggi dell\textquotesingle{}altra e trasmettere un A\+CK in risposta. A quel punto stampa una tabella riassuntiva.

Questo programma è per la radio \char`\"{}master\char`\"{}. Per leggere i risultati del test è necessario connettere un monitor seriale a questa radio (a 115200 Baud). 